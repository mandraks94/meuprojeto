javascript:(function () {
    if (window.location.href.includes("instagram.com")) {
        function injectMenu() {
            if (document.getElementById("assistiveTouchMenu")) return;

            // Adiciona estilos dinâmicos
            var s = document.createElement("style");
            s.id = "dynamicMenuStyle";
            document.head.appendChild(s);

            function updateColors() {
                var bgColor = window.getComputedStyle(document.body).backgroundColor;
                var rgb = bgColor.match(/\d+/g);
                if (!rgb) return;

                var brightness = (parseInt(rgb[0]) * 299 + parseInt(rgb[1]) * 587 + parseInt(rgb[2]) * 114) / 1000;
                if (brightness < 128) {
                    document.getElementById("dynamicMenuStyle").innerHTML = `
                        .assistive-touch {
                            position: fixed;
                            bottom: 50%;
                            right: 20px;
                            transform: translateY(50%);
                            width: 60px;
                            height: 60px;
                            background-color: #0077cc;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            z-index: 9999;
                            cursor: pointer;
                            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
                            transition: all 0.3s ease;
                        }
                        .assistive-menu {
                            position: fixed;
                            bottom: 50%;
                            right: 90px;
                            transform: translateY(50%);
                            display: none;
                            flex-direction: column;
                            gap: 10px;
                            z-index: 9998;
                        }
                        .menu-item {
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        }
                        .menu-item button {
                            width: 50px;
                            height: 50px;
                            border-radius: 50%;
                            border: none;
                            background: #fff;
                            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            cursor: pointer;
                        }
                        .menu-item span {
                            font-size: 14px;
                            color: white;
                            font-weight: bold;
                        }
                    `;
                } else {
                    document.getElementById("dynamicMenuStyle").innerHTML = `
                        .assistive-touch {
                            position: fixed;
                            bottom: 50%;
                            right: 20px;
                            transform: translateY(50%);
                            width: 60px;
                            height: 60px;
                            background-color: #0077cc;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            z-index: 9999;
                            cursor: pointer;
                            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
                            transition: all 0.3s ease;
                        }
                        .assistive-menu {
                            position: fixed;
                            bottom: 50%;
                            right: 90px;
                            transform: translateY(50%);
                            display: none;
                            flex-direction: column;
                            gap: 10px;
                            z-index: 9998;
                        }
                        .menu-item {
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        }
                        .menu-item button {
                            width: 50px;
                            height: 50px;
                            border-radius: 50%;
                            border: none;
                            background: #fff;
                            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            cursor: pointer;
                        }
                        .menu-item span {
                            font-size: 14px;
                            color: black;
                            font-weight: bold;
                        }
                    `;
                }
            }

            updateColors();

            // Cria o botão principal
            var mainBtn = document.createElement("div");
            mainBtn.id = "assistiveTouchMenu";
            mainBtn.className = "assistive-touch";
            mainBtn.innerHTML = "⚙️";

            // Cria o menu
            var menu = document.createElement("div");
            menu.className = "assistive-menu";
            menu.innerHTML = `
                <div class="menu-item"><button id="extrairSeguidoresBtn">👥</button><span>Seguidores</span></div>
                <div class="menu-item"><button id="extrairSeguindoBtn">➡️</button><span>Seguindo</span></div>
                <div class="menu-item"><button id="curtidasBtn">❤</button><span>Curtidas</span></div>
                <div class="menu-item"><button id="comentariosBtn">💬</button><span>Comentários</span></div>
                <div class="menu-item"><button id="mensagensBtn">📩</button><span>Mensagens</span></div>
                <div class="menu-item"><button id="bloqueadosBtn">⛔</button><span>Bloqueados</span></div>
            `;

            document.body.appendChild(mainBtn);
            document.body.appendChild(menu);

            // Alterna a exibição do menu
            mainBtn.addEventListener("click", () => {
                menu.style.display = menu.style.display === "flex" ? "none" : "flex";
            });

            // Adiciona eventos aos botões
            document.getElementById("curtidasBtn").addEventListener("click", () => {
                alert("Funcionalidade de curtidas em desenvolvimento.");
            });

            document.getElementById("comentariosBtn").addEventListener("click", () => {
                alert("Funcionalidade de comentários em desenvolvimento.");
            });

            document.getElementById("bloqueadosBtn").addEventListener("click", () => {
                alert("Funcionalidade de bloqueados em desenvolvimento.");
            });

            document.getElementById("mensagensBtn").addEventListener("click", () => {
                alert("Funcionalidade de mensagens em desenvolvimento.");
            });
        }

        injectMenu();

        // Reinsere o menu ao navegar
        let push = history.pushState;
        history.pushState = function () {
            push.apply(history, arguments);
            setTimeout(() => {
                if (window.location.href.includes("instagram.com")) injectMenu();
            }, 500);
        };

        window.addEventListener("popstate", () => {
            setTimeout(() => {
                if (window.location.href.includes("instagram.com")) injectMenu();
            }, 500);
        });
    }
})();